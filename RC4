key = "narutokeren"
message = "Robbi Rahim"
Encrypdata = []
DecryptData = []
Decryptmessage =""

Kbox = []
Sbox = []
for i in range(256):
    Sbox.append(i)
print("-"*10 + "Sbox" + "-"*10)
print(Sbox)

i = 0
j = 0

for i in range(256):
    j = (j + Sbox[i] + ord(key[i% (len(key))])) % 256
    tmp = Sbox[i]
    Sbox[i] = Sbox[j]
    Sbox[j] = tmp
print("-"*10 + "Permutation Sbox" + "-"*10)
print(Sbox)

counter = 0
i = 0
j = 0
for counter in range(len(message)):
    i = (i + 1) % 256
    j = (j + Sbox[i]) % 256
    tmp = Sbox[i]
    Sbox[i] = Sbox[j]
    Sbox[j] = tmp
    t = (Sbox[i] + Sbox[j]) % 256
    print(t)
    Kbox.append(Sbox[t])

print("-"*10 + "Key Stream" + "-"*10)
print(Kbox)


print("Message lenght {}".format(len(message)))

for i in range (len(message)):
    k = ord(message[i]) ^ Kbox[i]
    Encrypdata.append(k)

print("Encrypt")
for dt in Encrypdata:
    print(hex(dt))

print(len(Encrypdata))


print("Decrypt")


for i in range (len(Encrypdata)):
    k = Encrypdata[i] ^ Kbox[i]
    DecryptData.append(k)

for ch in DecryptData:
    Decryptmessage += chr(ch)
print(Decryptmessage)
